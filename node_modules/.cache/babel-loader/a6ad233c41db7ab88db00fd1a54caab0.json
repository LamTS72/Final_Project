{"ast":null,"code":"import axios from 'axios';\nimport { history } from '../App';\nimport { ACCESSTOKEN, USER_LOGIN, DOMAIN } from '../util/setting';\nimport { layChiTietPhongVe } from './FilmAction';\nimport { displayLoadingActon, hideLoadingActon } from './LoadingAction';\nimport { DANG_NHAP, SET_USER, THONG_TIN_TAI_KHOAN, TIM_KIEM_USER, XOA_DANH_SACH_GHE_DANG_DAT } from './types/FilmType';\nimport { quanLyNgDungService } from '../services/QuanLyNgDungService';\nexport const layDanhSachNgDungAction = () => {\n  return async dispatch => {\n    try {\n      const result = await quanLyNgDungService.layDanhSachNgDung(); // sau khi lay du lieu tu API ve dua len redux\n\n      const action = {\n        type: SET_USER,\n        dataUsers: result.data\n      };\n      dispatch(action);\n    } catch (errors) {\n      var _errors$response;\n\n      console.log('errors', (_errors$response = errors.response) === null || _errors$response === void 0 ? void 0 : _errors$response.data);\n    }\n  };\n};\nexport const dangKyAction = thongTinNguoiDung => {\n  return async dispatch => {\n    try {\n      const result = await axios({\n        url: `${DOMAIN}/api/QuanLyNguoiDung/DangKy`,\n        method: 'POST',\n        data: thongTinNguoiDung\n      });\n      history.push('/login'); // chuyen ve trang chu\n\n      alert('Your account has been successfully registed! Please login to use our website ... ');\n    } catch (err) {\n      var _err$response;\n\n      alert((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data);\n      dispatch(hideLoadingActon);\n    }\n  };\n};\nexport const dangNhapAction = thongTinDangNhap => {\n  return async dispatch => {\n    try {\n      const result = await quanLyNgDungService.dangNhapNguoiDung(thongTinDangNhap.taiKhoan, thongTinDangNhap.matKhau); // dua len Reducer\n\n      dispatch({\n        type: DANG_NHAP,\n        userLogin: result.data\n      }); // luu du lieu vao LocalStorage\n\n      localStorage.setItem(ACCESSTOKEN, result.data.ID); // dong thoi quay lai trang truoc do\n\n      history.goBack(); // history.push('/'); \n    } catch (err) {\n      var _err$response2;\n\n      alert(\"Lỗi: Tài Khoản hoặc Mật Khẩu không đúng\", (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data);\n    }\n  };\n};\nexport const datVeAction = thongTinDatVe => {\n  return async dispatch => {\n    // hien thi loading khi bam nut dat ve\n    try {\n      const result = await axios({\n        url: `${DOMAIN}/api/QuanLyDatVe/DatVe/${thongTinDatVe.maLichChieu}`,\n        method: 'PUT',\n        data: thongTinDatVe\n      }); // goi Action xoa ghe\n\n      await dispatch({\n        type: XOA_DANH_SACH_GHE_DANG_DAT\n      }); // sau khi dat ve xong goi lai action load lai phong ve, va tat loading di\n\n      await dispatch(layChiTietPhongVe(thongTinDatVe.maLichChieu));\n    } catch (err) {\n      var _err$response3;\n\n      alert(\"Lỗi: \", (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.data);\n    }\n  };\n};\nexport const layThongTinAction = taiKhoan => {\n  return async dispatch => {\n    try {\n      const result = await axios({\n        url: `${DOMAIN}/api/QuanLyNguoiDung/ThongTinTaiKhoan`,\n        method: 'POST',\n        data: {\n          taiKhoan: taiKhoan\n        },\n        // phan nay de API xac nhan da dang nhap\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem(ACCESSTOKEN)}`\n        }\n      }); // gửi thông tin lên redux\n\n      dispatch({\n        type: THONG_TIN_TAI_KHOAN,\n        thongTinTaiKhoan: result.data\n      });\n    } catch (err) {\n      var _err$response4;\n\n      alert((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.data);\n    }\n  };\n};\nexport const capNhatThongTinTaiKhoan = thongTinTaiKhoan => {\n  return async dispatch => {\n    try {\n      const result = await axios({\n        url: `${DOMAIN}/api/QuanLyNguoiDung/CapNhatThongTinNguoiDung`,\n        method: 'PUT',\n        data: thongTinTaiKhoan,\n        // phan nay de API xac nhan da dang nhap\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem(ACCESSTOKEN)}`\n        }\n      }); // load lai trang\n\n      dispatch(layThongTinAction(thongTinTaiKhoan.taiKhoan));\n      alert('Cập nhật thông tin thành công!');\n    } catch (err) {\n      var _err$response5;\n\n      alert((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : _err$response5.data);\n    }\n  };\n};\nexport const themNguoiDungAction = data => {\n  return async dispatch => {\n    try {\n      const result = await quanLyNgDungService.themNguoiDung(data);\n      alert('Thêm người dùng thành công'); // quay về trang user\n\n      history.replace('/admin/users');\n    } catch (err) {\n      alert(err.response.data);\n    }\n  };\n};\nexport const timKiemNguoiDungAction = searchKey => {\n  return async dispatch => {\n    try {\n      const result = await quanLyNgDungService.timKiemNguoiDung(searchKey); // đưa dữ liệu lên store\n\n      dispatch({\n        type: TIM_KIEM_USER,\n        danhSachNguoiDungTimKiem: result.data\n      });\n    } catch (err) {\n      alert(err.response.data);\n    }\n  };\n};\nexport const xoaNguoiDungAction = taiKhoan => {\n  return async dispatch => {\n    try {\n      const result = await quanLyNgDungService.xoaNguoiDung(taiKhoan);\n      alert('Xóa thành công!'); // load lai trang\n\n      dispatch(layDanhSachNgDungAction());\n    } catch (err) {\n      alert(err.response.data);\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/AMD/OneDrive/Desktop/SE_project-1-main/src/action/UserAction.js"],"names":["axios","history","ACCESSTOKEN","USER_LOGIN","DOMAIN","layChiTietPhongVe","displayLoadingActon","hideLoadingActon","DANG_NHAP","SET_USER","THONG_TIN_TAI_KHOAN","TIM_KIEM_USER","XOA_DANH_SACH_GHE_DANG_DAT","quanLyNgDungService","layDanhSachNgDungAction","dispatch","result","layDanhSachNgDung","action","type","dataUsers","data","errors","console","log","response","dangKyAction","thongTinNguoiDung","url","method","push","alert","err","dangNhapAction","thongTinDangNhap","dangNhapNguoiDung","taiKhoan","matKhau","userLogin","localStorage","setItem","ID","goBack","datVeAction","thongTinDatVe","maLichChieu","layThongTinAction","headers","getItem","thongTinTaiKhoan","capNhatThongTinTaiKhoan","themNguoiDungAction","themNguoiDung","replace","timKiemNguoiDungAction","searchKey","timKiemNguoiDung","danhSachNguoiDungTimKiem","xoaNguoiDungAction","xoaNguoiDung"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {history} from '../App';\nimport { ACCESSTOKEN, USER_LOGIN, DOMAIN } from '../util/setting';\nimport { layChiTietPhongVe } from './FilmAction';\nimport { displayLoadingActon, hideLoadingActon } from './LoadingAction';\nimport { DANG_NHAP, SET_USER, THONG_TIN_TAI_KHOAN, TIM_KIEM_USER, XOA_DANH_SACH_GHE_DANG_DAT} from './types/FilmType';\nimport { quanLyNgDungService } from '../services/QuanLyNgDungService';\n\n\n\n\nexport const layDanhSachNgDungAction = () =>{\n    return async (dispatch) =>{\n        try {\n            const result = await quanLyNgDungService.layDanhSachNgDung();\n            // sau khi lay du lieu tu API ve dua len redux\n            const action = {\n                type:SET_USER,\n                dataUsers: result.data\n            }\n            dispatch(action)\n        } catch (errors) {\n            console.log('errors', errors.response?.data);\n        }\n    }\n}\n\nexport const dangKyAction = (thongTinNguoiDung) => {\n    return async dispatch => {\n        try {\n            const result = await axios({\n                url:`${DOMAIN}/api/QuanLyNguoiDung/DangKy`,\n                method:'POST',\n                data:thongTinNguoiDung\n            });\n            history.push('/login'); // chuyen ve trang chu\n            alert('Your account has been successfully registed! Please login to use our website ... ');\n\n        }catch (err) {\n            alert(err.response?.data);\n            dispatch(hideLoadingActon);\n        }\n    }\n}\n\nexport const dangNhapAction = (thongTinDangNhap) => {\n    return async dispatch => {\n        try {\n            const result = await quanLyNgDungService.dangNhapNguoiDung(thongTinDangNhap.taiKhoan, thongTinDangNhap.matKhau);\n            // dua len Reducer\n            dispatch({\n                type:DANG_NHAP,\n                userLogin:result.data\n            })\n            // luu du lieu vao LocalStorage\n            localStorage.setItem(ACCESSTOKEN, result.data.ID);\n            // dong thoi quay lai trang truoc do\n            history.goBack();\n            // history.push('/'); \n\n        } catch (err) {\n            alert( \"Lỗi: Tài Khoản hoặc Mật Khẩu không đúng\",err.response?.data)\n        }\n    }\n}\n\nexport const datVeAction = (thongTinDatVe) =>{\n    return async dispatch => {\n        // hien thi loading khi bam nut dat ve\n        try{\n            const result = await axios({\n                url:`${DOMAIN}/api/QuanLyDatVe/DatVe/${thongTinDatVe.maLichChieu}`,\n                method:'PUT',\n                data:thongTinDatVe,\n            });\n            // goi Action xoa ghe\n            await dispatch({\n                type:XOA_DANH_SACH_GHE_DANG_DAT\n            });\n            \n            // sau khi dat ve xong goi lai action load lai phong ve, va tat loading di\n            await dispatch(layChiTietPhongVe(thongTinDatVe.maLichChieu));\n        }  \n        catch (err) {\n            alert(\"Lỗi: \",err.response?.data);\n        }\n    }\n}\n\nexport const layThongTinAction = (taiKhoan)=>{\n    return async dispatch => {\n        try{\n            const result = await axios({\n                url:`${DOMAIN}/api/QuanLyNguoiDung/ThongTinTaiKhoan`,\n                method:'POST',\n                data:{taiKhoan:taiKhoan},\n\n                // phan nay de API xac nhan da dang nhap\n                headers:{\n                    'Authorization':`Bearer ${localStorage.getItem(ACCESSTOKEN)}`\n                }\n            });\n            // gửi thông tin lên redux\n            dispatch({\n                type:THONG_TIN_TAI_KHOAN,\n                thongTinTaiKhoan:result.data\n            })\n\n        }catch (err){\n            alert(err.response?.data);\n        }\n    }\n}\n\nexport const capNhatThongTinTaiKhoan = (thongTinTaiKhoan) => {\n    return async dispatch => {\n        try{\n            const result = await axios({\n                url:`${DOMAIN}/api/QuanLyNguoiDung/CapNhatThongTinNguoiDung`,\n                method:'PUT',\n                data:thongTinTaiKhoan,\n\n                // phan nay de API xac nhan da dang nhap\n                headers:{\n                    'Authorization':`Bearer ${localStorage.getItem(ACCESSTOKEN)}`\n                }\n            });\n            // load lai trang\n            dispatch(layThongTinAction(thongTinTaiKhoan.taiKhoan));\n            alert('Cập nhật thông tin thành công!');\n\n        }catch (err){\n            \n            alert(err.response?.data);\n        }\n    }\n}\n\nexport const themNguoiDungAction = (data) => {\n    return async dispatch => {\n        try{\n            const result = await quanLyNgDungService.themNguoiDung(data);\n            alert ('Thêm người dùng thành công');\n            // quay về trang user\n            history.replace('/admin/users');\n\n        }catch (err) {\n            alert(err.response.data)\n        }\n    }\n}\n\nexport const timKiemNguoiDungAction = (searchKey) => {\n    return async dispatch => {\n        try{\n            const result = await quanLyNgDungService.timKiemNguoiDung(searchKey);\n            // đưa dữ liệu lên store\n            dispatch({\n                type: TIM_KIEM_USER,\n                danhSachNguoiDungTimKiem: result.data\n            })\n\n        }catch (err){\n            alert (err.response.data)\n        }\n    }\n}\n\nexport const xoaNguoiDungAction = (taiKhoan) => {\n    return async dispatch => {\n        try{\n            const result = await quanLyNgDungService.xoaNguoiDung(taiKhoan);\n            alert('Xóa thành công!');\n            // load lai trang\n            dispatch(layDanhSachNgDungAction());\n\n        }catch (err){\n            alert(err.response.data);\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}