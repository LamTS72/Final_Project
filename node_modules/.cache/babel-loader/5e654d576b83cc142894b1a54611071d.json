{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AMD\\\\OneDrive\\\\Desktop\\\\SE_project-1-main\\\\src\\\\pages\\\\Checkout\\\\Checkout.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { layChiTietPhongVe, themLichSuAction } from '../../action/FilmAction'; // su dung thu vien lodash\n\nimport _ from 'lodash';\nimport { USER_LOGIN } from '../../util/setting';\nimport { Redirect } from 'react-router';\nimport { datVeAction } from '../../action/UserAction'; // su dung thu vien icon cua antdesign\n\nimport { UserAddOutlined } from '@ant-design/icons';\nimport { DAT_GHE } from '../../action/types/FilmType';\nimport Footer from '../../component/Footer/Footer';\nimport { history } from '../../App';\nimport \"./styleCheckout.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Checkout(props) {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    chiTietPhongVe,\n    danhSachGheDangDat,\n    danhSachGheReturned\n  } = useSelector(state => state.FilmReducer); // lấy User đăng nhập từ redux về\n\n  const {\n    userLogin\n  } = useSelector(state => state.UserReducer);\n  const {\n    thongTinPhim,\n    danhSachGhe\n  } = chiTietPhongVe;\n  useEffect(() => {\n    // lấy id từ url\n    let maLichChieu = props.match.params.id;\n    const action = layChiTietPhongVe(maLichChieu);\n    dispatch(action);\n  }, []); // kiểm tra đăng nhập rồi mới cho thao tác\n\n  if (!localStorage.getItem(USER_LOGIN)) {\n    alert('ban can phai dang nhap');\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 16\n    }, this);\n  } // if (!userLogin.username){\n  //     alert(\"You have to login first !\");\n  //     return <Redirect to='/login' />\n  // }\n  // render ra hệ thống ghế ngồi\n\n\n  const renderGhe = () => {\n    return danhSachGhe === null || danhSachGhe === void 0 ? void 0 : danhSachGhe.map((ghe, index) => {\n      let classGheVip = ghe.loaiGhe === 'Vip' ? 'gheVip' : '';\n      let classGheDaDat = ghe.daDat === true ? 'gheDaDat' : ''; // moi lan render ra 1 ghe dem kiem tra xem cos trung voi ghe dang dat ko\n\n      let classGheDangDat = '';\n      let classGheMinhDat = '';\n\n      if (ghe.taiKhoanNguoiDat === userLogin.taiKhoan) {\n        classGheMinhDat = 'gheMinhDat';\n      }\n\n      let indexGheDD = danhSachGheDangDat.findIndex(gheDD => gheDD.maGhe === ghe.maGhe);\n\n      if (indexGheDD !== -1) {\n        classGheDangDat = 'gheDangDat';\n      }\n\n      return /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            const action = {\n              type: DAT_GHE,\n              ghe: ghe,\n              user: userLogin\n            };\n            dispatch(action);\n          },\n          disabled: ghe.daDat,\n          className: `ghe ${classGheVip} ${classGheDaDat} ${classGheDangDat} ${classGheMinhDat}`,\n          children: classGheMinhDat === '' ? ghe.stt : /*#__PURE__*/_jsxDEV(UserAddOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 57\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }, this), (index + 1) % 16 === 0 ? /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 43\n        }, this) : '']\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 20\n      }, this);\n    });\n  };\n\n  const returnTien = 0;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"check-out-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mb-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-8 mt-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"w-100\",\n              src: \"/img/screen.png\",\n              alt: \"movie\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this), renderGhe()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row ml-2 mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ghe gheDaDat align-middle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Booked Seat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ghe gheVip align-middle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"VIP Seat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ghe gheDangDat align-middle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Being Selected Seat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ghe gheMinhDat align-middle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Selected Seat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row ml-2 mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ghe align-middle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Available Seat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-4 mt-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-warning text-center display-4\",\n            children: [danhSachGheDangDat.reduce((tongTien, gheDD, index) => {\n              returnTien += gheDD.giaVe;\n              return tongTien += gheDD.giaVe;\n            }, 0).toLocaleString(), \" VND\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"thongTinPhim\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Movie name: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkout-text-info\",\n                children: thongTinPhim === null || thongTinPhim === void 0 ? void 0 : thongTinPhim.tenPhim\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 40\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Location: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkout-text-info\",\n                children: [thongTinPhim === null || thongTinPhim === void 0 ? void 0 : thongTinPhim.diaChi, \" - \", thongTinPhim === null || thongTinPhim === void 0 ? void 0 : thongTinPhim.tenCumRap]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 38\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Showing date: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkout-text-info\",\n                children: [thongTinPhim === null || thongTinPhim === void 0 ? void 0 : thongTinPhim.ngayChieu, \" - \", thongTinPhim === null || thongTinPhim === void 0 ? void 0 : thongTinPhim.gioChieu]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 42\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12\",\n                children: [\"Seat: \", _.sortBy(danhSachGheDangDat, ['maGhe']).map((gheDangDat, index) => {\n                  return /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"checkout-text-info\",\n                    children: [gheDangDat.stt, \" \"]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 44\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Email: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkout-text-info\",\n                children: userLogin.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 35\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Phone number: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkout-text-info\",\n                children: userLogin.soDt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 42\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"checkout-button-buy\",\n            onClick: () => {\n              for (var item of danhSachGheDangDat) {\n                for (var chair of chiTietPhongVe.danhSachGhe) {\n                  if (item.maGhe == chair.maGhe) {\n                    chair.taiKhoanNguoiDat = userLogin.taiKhoan;\n                    chair.daDat = true;\n                    break;\n                  }\n                }\n              }\n\n              let thongTinDatVe = {\n                'maLichChieu': chiTietPhongVe.thongTinPhim.maLichChieu,\n                'danhSachGhe': chiTietPhongVe.danhSachGhe\n              };\n              let thongTinLichSu = {\n                'giaVe': returnTien,\n                'danhSachMaGhe': danhSachGheDangDat.gheDD,\n                'lichChieu': thongTinPhim === null || thongTinPhim === void 0 ? void 0 : thongTinPhim.ngayChieu\n              };\n\n              if (danhSachGheDangDat.length > 0) {\n                dispatch(datVeAction(thongTinDatVe));\n                dispatch(themLichSuAction(thongTinLichSu));\n                history.replace(`/payment/${props.match.params.id}`);\n              } else alert('You have to choose seat !!!');\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"display-5 py-2\",\n              children: \"BOOK TICKET\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"checkout-button-buy mt-3\",\n            onClick: () => {\n              history.replace(`/u`);\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"display-5 py-2\",\n              children: \"BOOKING DETAIL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Checkout, \"JLmOb2T6ceUqDp2ncbmudkEmRnw=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["C:/Users/AMD/OneDrive/Desktop/SE_project-1-main/src/pages/Checkout/Checkout.js"],"names":["React","Fragment","useEffect","useDispatch","useSelector","NavLink","layChiTietPhongVe","themLichSuAction","_","USER_LOGIN","Redirect","datVeAction","UserAddOutlined","DAT_GHE","Footer","history","Checkout","props","dispatch","chiTietPhongVe","danhSachGheDangDat","danhSachGheReturned","state","FilmReducer","userLogin","UserReducer","thongTinPhim","danhSachGhe","maLichChieu","match","params","id","action","localStorage","getItem","alert","renderGhe","map","ghe","index","classGheVip","loaiGhe","classGheDaDat","daDat","classGheDangDat","classGheMinhDat","taiKhoanNguoiDat","taiKhoan","indexGheDD","findIndex","gheDD","maGhe","type","user","stt","returnTien","reduce","tongTien","giaVe","toLocaleString","tenPhim","diaChi","tenCumRap","ngayChieu","gioChieu","sortBy","gheDangDat","email","soDt","item","chair","thongTinDatVe","thongTinLichSu","length","replace"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,iBAAT,EAA4BC,gBAA5B,QAAoD,yBAApD,C,CACA;;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,UAAT,QAA2B,oBAA3B;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,WAAT,QAA4B,yBAA5B,C,CACA;;AACA,SAASC,eAAT,QAAgC,mBAAhC;AACA,SAASC,OAAT,QAAwB,6BAAxB;AACA,OAAOC,MAAP,MAAmB,+BAAnB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,OAAO,qBAAP;;AAGA,eAAe,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AAAA;;AAEpC,QAAMC,QAAQ,GAAGf,WAAW,EAA5B;AACA,QAAM;AAAEgB,IAAAA,cAAF;AAAkBC,IAAAA,kBAAlB;AAAsCC,IAAAA;AAAtC,MAA8DjB,WAAW,CAACkB,KAAK,IAAIA,KAAK,CAACC,WAAhB,CAA/E,CAHoC,CAIpC;;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAgBpB,WAAW,CAACkB,KAAK,IAAIA,KAAK,CAACG,WAAhB,CAAjC;AACA,QAAM;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA;AAAhB,MAAgCR,cAAtC;AACAjB,EAAAA,SAAS,CAAC,MAAM;AAEZ;AACA,QAAI0B,WAAW,GAAGX,KAAK,CAACY,KAAN,CAAYC,MAAZ,CAAmBC,EAArC;AACA,UAAMC,MAAM,GAAG1B,iBAAiB,CAACsB,WAAD,CAAhC;AACAV,IAAAA,QAAQ,CAACc,MAAD,CAAR;AAEH,GAPQ,EAON,EAPM,CAAT,CAPoC,CAgBpC;;AACA,MAAI,CAACC,YAAY,CAACC,OAAb,CAAqBzB,UAArB,CAAL,EAAuC;AACnC0B,IAAAA,KAAK,CAAC,wBAAD,CAAL;AACA,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,YAAP;AACH,GApBmC,CAqBpC;AACA;AACA;AACA;AAEA;;;AACA,QAAMC,SAAS,GAAG,MAAM;AACpB,WAAOT,WAAP,aAAOA,WAAP,uBAAOA,WAAW,CAAEU,GAAb,CAAiB,CAACC,GAAD,EAAMC,KAAN,KAAgB;AAEpC,UAAIC,WAAW,GAAGF,GAAG,CAACG,OAAJ,KAAgB,KAAhB,GAAwB,QAAxB,GAAmC,EAArD;AACA,UAAIC,aAAa,GAAGJ,GAAG,CAACK,KAAJ,KAAc,IAAd,GAAqB,UAArB,GAAkC,EAAtD,CAHoC,CAIpC;;AACA,UAAIC,eAAe,GAAG,EAAtB;AACA,UAAIC,eAAe,GAAG,EAAtB;;AACA,UAAIP,GAAG,CAACQ,gBAAJ,KAAyBtB,SAAS,CAACuB,QAAvC,EAAiD;AAC7CF,QAAAA,eAAe,GAAG,YAAlB;AACH;;AAED,UAAIG,UAAU,GAAG5B,kBAAkB,CAAC6B,SAAnB,CAA6BC,KAAK,IAAIA,KAAK,CAACC,KAAN,KAAgBb,GAAG,CAACa,KAA1D,CAAjB;;AACA,UAAIH,UAAU,KAAK,CAAC,CAApB,EAAuB;AACnBJ,QAAAA,eAAe,GAAG,YAAlB;AACH;;AAED,0BAAO,QAAC,QAAD;AAAA,gCACH;AAAQ,UAAA,OAAO,EAAE,MAAM;AACnB,kBAAMZ,MAAM,GAAG;AAAEoB,cAAAA,IAAI,EAAEvC,OAAR;AAAiByB,cAAAA,GAAG,EAAEA,GAAtB;AAA2Be,cAAAA,IAAI,EAAE7B;AAAjC,aAAf;AACAN,YAAAA,QAAQ,CAACc,MAAD,CAAR;AACH,WAHD;AAGG,UAAA,QAAQ,EAAEM,GAAG,CAACK,KAHjB;AAGwB,UAAA,SAAS,EAAG,OAAMH,WAAY,IAAGE,aAAc,IAAGE,eAAgB,IAAGC,eAAgB,EAH7G;AAAA,oBAIKA,eAAe,KAAK,EAApB,GAAyBP,GAAG,CAACgB,GAA7B,gBAAmC,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAJxC;AAAA;AAAA;AAAA;AAAA,gBADG,EAOF,CAACf,KAAK,GAAG,CAAT,IAAc,EAAd,KAAqB,CAArB,gBAAyB;AAAA;AAAA;AAAA;AAAA,gBAAzB,GAAkC,EAPhC;AAAA,SAAeA,KAAf;AAAA;AAAA;AAAA;AAAA,cAAP;AASH,KAzBM,CAAP;AA0BH,GA3BD;;AA4BA,QAAMgB,UAAU,GAAG,CAAnB;AAEA,sBACA;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,gCACI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,OAAf;AAAuB,cAAA,GAAG,EAAC,iBAA3B;AAA6C,cAAA,GAAG,EAAC;AAAjD;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEKnB,SAAS,EAFd;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAKI;AAAK,YAAA,SAAS,EAAC,eAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,OAAf;AAAA,sCACI;AAAQ,gBAAA,SAAS,EAAC;AAAlB;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAKI;AAAK,cAAA,SAAS,EAAC,OAAf;AAAA,sCACI;AAAQ,gBAAA,SAAS,EAAC;AAAlB;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBALJ,eASI;AAAK,cAAA,SAAS,EAAC,OAAf;AAAA,sCACI;AAAQ,gBAAA,SAAS,EAAC;AAAlB;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBATJ,eAaI;AAAK,cAAA,SAAS,EAAC,OAAf;AAAA,sCACI;AAAQ,gBAAA,SAAS,EAAC;AAAlB;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAbJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ,eAuBI;AAAK,YAAA,SAAS,EAAC,eAAf;AAAA,mCACI;AAAK,cAAA,SAAS,EAAC,OAAf;AAAA,sCACI;AAAQ,gBAAA,SAAS,EAAC;AAAlB;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eA+BI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,oCAAf;AAAA,uBAAqDhB,kBAAkB,CAACoC,MAAnB,CAA0B,CAACC,QAAD,EAAWP,KAAX,EAAkBX,KAAlB,KAA4B;AACvGgB,cAAAA,UAAU,IAAIL,KAAK,CAACQ,KAApB;AACA,qBAAOD,QAAQ,IAAIP,KAAK,CAACQ,KAAzB;AACH,aAHoD,EAGlD,CAHkD,EAG/CC,cAH+C,EAArD;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAKI;AAAA;AAAA;AAAA;AAAA,kBALJ,eAMI;AAAK,YAAA,SAAS,EAAC,cAAf;AAAA,oCACI;AAAA,sDAAe;AAAM,gBAAA,SAAS,EAAC,oBAAhB;AAAA,0BAAsCjC,YAAtC,aAAsCA,YAAtC,uBAAsCA,YAAY,CAAEkC;AAApD;AAAA;AAAA;AAAA;AAAA,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA,oDAAa;AAAM,gBAAA,SAAS,EAAC,oBAAhB;AAAA,2BAAsClC,YAAtC,aAAsCA,YAAtC,uBAAsCA,YAAY,CAAEmC,MAApD,SAA+DnC,YAA/D,aAA+DA,YAA/D,uBAA+DA,YAAY,CAAEoC,SAA7E;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAb;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI;AAAA,wDAAiB;AAAM,gBAAA,SAAS,EAAC,oBAAhB;AAAA,2BAAsCpC,YAAtC,aAAsCA,YAAtC,uBAAsCA,YAAY,CAAEqC,SAApD,SAAkErC,YAAlE,aAAkEA,YAAlE,uBAAkEA,YAAY,CAAEsC,QAAhF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ,eAWI;AAAA;AAAA;AAAA;AAAA,kBAXJ,eAYI;AAAK,YAAA,SAAS,EAAC,MAAf;AAAA,mCACI;AAAK,cAAA,SAAS,EAAC,KAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,QAAf;AAAA,qCACWxD,CAAC,CAACyD,MAAF,CAAS7C,kBAAT,EAA6B,CAAC,OAAD,CAA7B,EAAwCiB,GAAxC,CAA4C,CAAC6B,UAAD,EAAa3B,KAAb,KAAuB;AACtE,sCAAO;AAAkB,oBAAA,SAAS,EAAC,oBAA5B;AAAA,+BAAkD2B,UAAU,CAACZ,GAA7D;AAAA,qBAAWf,KAAX;AAAA;AAAA;AAAA;AAAA,0BAAP;AACH,iBAFM,CADX;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAZJ,eAqBI;AAAA;AAAA;AAAA;AAAA,kBArBJ,eAsBI;AAAK,YAAA,SAAS,EAAC,MAAf;AAAA,oCACI;AAAA,iDAAU;AAAM,gBAAA,SAAS,EAAC,oBAAhB;AAAA,0BAAsCf,SAAS,CAAC2C;AAAhD;AAAA;AAAA;AAAA;AAAA,sBAAV;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI;AAAA,wDAAiB;AAAM,gBAAA,SAAS,EAAC,oBAAhB;AAAA,0BAAsC3C,SAAS,CAAC4C;AAAhD;AAAA;AAAA;AAAA;AAAA,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAtBJ,eA2BI;AAAA;AAAA;AAAA;AAAA,kBA3BJ,eA6BI;AAAK,YAAA,SAAS,EAAC,qBAAf;AAAqC,YAAA,OAAO,EAAE,MAAM;AAChD,mBAAK,IAAIC,IAAT,IAAiBjD,kBAAjB,EAAqC;AACjC,qBAAK,IAAIkD,KAAT,IAAkBnD,cAAc,CAACQ,WAAjC,EAA6C;AACzC,sBAAI0C,IAAI,CAAClB,KAAL,IAAcmB,KAAK,CAACnB,KAAxB,EAA+B;AAC3BmB,oBAAAA,KAAK,CAACxB,gBAAN,GAAyBtB,SAAS,CAACuB,QAAnC;AACAuB,oBAAAA,KAAK,CAAC3B,KAAN,GAAc,IAAd;AACA;AACH;AACJ;AACJ;;AACD,kBAAI4B,aAAa,GAAG;AAChB,+BAAepD,cAAc,CAACO,YAAf,CAA4BE,WAD3B;AAEhB,+BAAeT,cAAc,CAACQ;AAFd,eAApB;AAIA,kBAAI6C,cAAc,GAAG;AACjB,yBAASjB,UADQ;AAEjB,iCAAiBnC,kBAAkB,CAAC8B,KAFnB;AAGjB,6BAAcxB,YAAd,aAAcA,YAAd,uBAAcA,YAAY,CAAEqC;AAHX,eAArB;;AAMA,kBAAI3C,kBAAkB,CAACqD,MAAnB,GAA4B,CAAhC,EAAkC;AAC9BvD,gBAAAA,QAAQ,CAACP,WAAW,CAAC4D,aAAD,CAAZ,CAAR;AACArD,gBAAAA,QAAQ,CAACX,gBAAgB,CAACiE,cAAD,CAAjB,CAAR;AACAzD,gBAAAA,OAAO,CAAC2D,OAAR,CAAiB,YAAWzD,KAAK,CAACY,KAAN,CAAYC,MAAZ,CAAmBC,EAAG,EAAlD;AACH,eAJD,MAIMI,KAAK,CAAC,6BAAD,CAAL;AACT,aAzBD;AAAA,mCA0BI;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA1BJ;AAAA;AAAA;AAAA;AAAA,kBA7BJ,eAyDI;AAAK,YAAA,SAAS,EAAC,0BAAf;AAA0C,YAAA,OAAO,EAAE,MAAI;AACnDpB,cAAAA,OAAO,CAAC2D,OAAR,CAAiB,IAAjB;AACH,aAFD;AAAA,mCAGI;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,kBAzDJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAkGI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YAlGJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADA;AAsGH;;GA/JuB1D,Q;UAEHb,W,EACmDC,W,EAE9CA,W;;;KALFY,Q","sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { NavLink } from 'react-router-dom';\nimport { layChiTietPhongVe, themLichSuAction } from '../../action/FilmAction';\n// su dung thu vien lodash\nimport _ from 'lodash';\nimport { USER_LOGIN } from '../../util/setting';\nimport { Redirect } from 'react-router';\nimport { datVeAction } from '../../action/UserAction';\n// su dung thu vien icon cua antdesign\nimport { UserAddOutlined } from '@ant-design/icons'\nimport { DAT_GHE } from '../../action/types/FilmType';\nimport Footer from '../../component/Footer/Footer';\nimport { history } from '../../App';\nimport \"./styleCheckout.css\";\n\n\nexport default function Checkout(props) {\n\n    const dispatch = useDispatch();\n    const { chiTietPhongVe, danhSachGheDangDat, danhSachGheReturned } = useSelector(state => state.FilmReducer);\n    // lấy User đăng nhập từ redux về\n    const { userLogin } = useSelector(state => state.UserReducer)\n    const { thongTinPhim, danhSachGhe } = chiTietPhongVe;\n    useEffect(() => {\n\n        // lấy id từ url\n        let maLichChieu = props.match.params.id;\n        const action = layChiTietPhongVe(maLichChieu);\n        dispatch(action);\n\n    }, [])\n\n    // kiểm tra đăng nhập rồi mới cho thao tác\n    if (!localStorage.getItem(USER_LOGIN)) {\n        alert('ban can phai dang nhap');\n        return <Redirect to='/login' />\n    }\n    // if (!userLogin.username){\n    //     alert(\"You have to login first !\");\n    //     return <Redirect to='/login' />\n    // }\n\n    // render ra hệ thống ghế ngồi\n    const renderGhe = () => {\n        return danhSachGhe?.map((ghe, index) => {\n\n            let classGheVip = ghe.loaiGhe === 'Vip' ? 'gheVip' : '';\n            let classGheDaDat = ghe.daDat === true ? 'gheDaDat' : '';\n            // moi lan render ra 1 ghe dem kiem tra xem cos trung voi ghe dang dat ko\n            let classGheDangDat = '';\n            let classGheMinhDat = '';\n            if (ghe.taiKhoanNguoiDat === userLogin.taiKhoan) {\n                classGheMinhDat = 'gheMinhDat';\n            }\n\n            let indexGheDD = danhSachGheDangDat.findIndex(gheDD => gheDD.maGhe === ghe.maGhe);\n            if (indexGheDD !== -1) {\n                classGheDangDat = 'gheDangDat';\n            }\n\n            return <Fragment key={index}>\n                <button onClick={() => {\n                    const action = { type: DAT_GHE, ghe: ghe, user: userLogin };\n                    dispatch(action);\n                }} disabled={ghe.daDat} className={`ghe ${classGheVip} ${classGheDaDat} ${classGheDangDat} ${classGheMinhDat}`}>\n                    {classGheMinhDat === '' ? ghe.stt : <UserAddOutlined />}\n                </button>\n                {(index + 1) % 16 === 0 ? <br /> : ''}\n            </Fragment>\n        })\n    }\n    const returnTien = 0;\n\n    return (\n    <div className=\"check-out-page\">\n        <div className=\"container mb-5\">\n            <div className=\"row\">\n                <div className=\"col-8 mt-5\">\n                    <div className=\"text-center\">\n                        <img className=\"w-100\" src=\"/img/screen.png\" alt=\"movie\" />\n                        {renderGhe()}\n                    </div>\n                    <div className=\"row ml-2 mt-4\">\n                        <div className=\"col-3\">\n                            <button className=\"ghe gheDaDat align-middle\"></button>\n                            <span>Booked Seat</span>\n                        </div>\n                        <div className=\"col-3\">\n                            <button className=\"ghe gheVip align-middle\"></button>\n                            <span>VIP Seat</span>\n                        </div>\n                        <div className=\"col-3\">\n                            <button className=\"ghe gheDangDat align-middle\"></button>\n                            <span>Being Selected Seat</span>\n                        </div>\n                        <div className=\"col-3\">\n                            <button className=\"ghe gheMinhDat align-middle\"></button>\n                            <span>Selected Seat</span>\n                        </div>\n                    </div> \n                    <div className=\"row ml-2 mt-2\">\n                        <div className=\"col-6\">\n                            <button className=\"ghe align-middle\"></button>\n                            <span>Available Seat</span>\n                        </div>\n                    </div> \n                </div>\n                <div className=\"col-4 mt-5\">\n                    <div className=\"text-warning text-center display-4\">{danhSachGheDangDat.reduce((tongTien, gheDD, index) => {\n                        returnTien += gheDD.giaVe;\n                        return tongTien += gheDD.giaVe;\n                    }, 0).toLocaleString()} VND</div>\n                    <hr />\n                    <div className=\"thongTinPhim\">\n                        <p>Movie name: <span className=\"checkout-text-info\">{thongTinPhim?.tenPhim}</span> </p>\n                        <p>Location: <span className=\"checkout-text-info\">{thongTinPhim?.diaChi} - {thongTinPhim?.tenCumRap}</span> </p>\n                        <p>Showing date: <span className=\"checkout-text-info\">{thongTinPhim?.ngayChieu} - {thongTinPhim?.gioChieu}</span> </p>\n                    </div>\n                    <hr />\n                    <div className=\"my-2\">\n                        <div className=\"row\">\n                            <div className=\"col-12\">\n                                Seat: {_.sortBy(danhSachGheDangDat, ['maGhe']).map((gheDangDat, index) => {\n                                    return <span key={index} className=\"checkout-text-info\">{gheDangDat.stt} </span>\n                                })}\n                            </div>\n                        </div>\n                    </div>\n                    <hr />\n                    <div className=\"my-2\">\n                        <p>Email: <span className=\"checkout-text-info\">{userLogin.email}</span></p>\n                        <hr />\n                        <p>Phone number: <span className=\"checkout-text-info\">{userLogin.soDt}</span></p>\n                    </div>\n                    <hr />\n                    {/* <NavLink exact to ='/payment' style={{width: '100%'}} className=\"btn btn-danger\">PAYMENT</NavLink> */}\n                    <div className=\"checkout-button-buy\" onClick={() => {\n                        for (var item of danhSachGheDangDat) {\n                            for (var chair of chiTietPhongVe.danhSachGhe){\n                                if (item.maGhe == chair.maGhe) {\n                                    chair.taiKhoanNguoiDat = userLogin.taiKhoan;\n                                    chair.daDat = true;\n                                    break;\n                                }\n                            }\n                        }\n                        let thongTinDatVe = {\n                            'maLichChieu': chiTietPhongVe.thongTinPhim.maLichChieu,\n                            'danhSachGhe': chiTietPhongVe.danhSachGhe\n                        }\n                        let thongTinLichSu = {\n                            'giaVe': returnTien,\n                            'danhSachMaGhe': danhSachGheDangDat.gheDD,\n                            'lichChieu':  thongTinPhim?.ngayChieu\n\n                        }\n                        if (danhSachGheDangDat.length > 0){\n                            dispatch(datVeAction(thongTinDatVe));\n                            dispatch(themLichSuAction(thongTinLichSu));\n                            history.replace(`/payment/${props.match.params.id}`);\n                        }else alert('You have to choose seat !!!');\n                    }}>\n                        <div className=\"display-5 py-2\" >BOOK TICKET</div>\n                    </div>\n                    <div className=\"checkout-button-buy mt-3\" onClick={()=>{\n                        history.replace(`/u`);\n                    }}>\n                        <div className=\"display-5 py-2\">BOOKING DETAIL</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <Footer/>\n    </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}